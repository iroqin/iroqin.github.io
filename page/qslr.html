<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Q.SLR | Serverless Screener</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel (untuk memproses JSX di browser) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Custom Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            dark: '#0f172a',
                            darker: '#020617',
                            primary: '#3b82f6',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom Scrollbar */
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #0f172a; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #475569; }
        
        /* Animations */
        @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
        .animate-fade-in { animation: fade-in 0.3s ease-out; }
    </style>
</head>
<body class="bg-[#0f172a] text-slate-200 font-sans selection:bg-blue-500 selection:text-white h-screen overflow-hidden">

    <div id="root" class="h-full"></div>

    <!-- MAIN REACT APPLICATION SCRIPT -->
    <script type="text/babel">
        const { useState, useEffect, useCallback, useRef } = React;

        // --- ICONS ---
        const IconWrapper = ({ children, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>
        );
        const Upload = ({ className }) => <IconWrapper className={className}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" x2="12" y1="3" y2="15"/></IconWrapper>;
        const CheckCircle = ({ className }) => <IconWrapper className={className}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></IconWrapper>;
        const XCircle = ({ className }) => <IconWrapper className={className}><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></IconWrapper>;
        const HelpCircle = ({ className }) => <IconWrapper className={className}><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></IconWrapper>;
        const ArrowRight = ({ className }) => <IconWrapper className={className}><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></IconWrapper>;
        const ArrowLeft = ({ className }) => <IconWrapper className={className}><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></IconWrapper>;
        const BookOpen = ({ className }) => <IconWrapper className={className}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></IconWrapper>;
        const Filter = ({ className }) => <IconWrapper className={className}><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/></IconWrapper>;
        const ExternalLink = ({ className }) => <IconWrapper className={className}><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></IconWrapper>;
        const Save = ({ className }) => <IconWrapper className={className}><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></IconWrapper>;
        const FolderOpen = ({ className }) => <IconWrapper className={className}><path d="m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-3.25 7a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2"/></IconWrapper>;
        const Plus = ({ className }) => <IconWrapper className={className}><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></IconWrapper>;
        const X = ({ className }) => <IconWrapper className={className}><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></IconWrapper>;
        const Edit3 = ({ className }) => <IconWrapper className={className}><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/></IconWrapper>;
        const GitMerge = ({ className }) => <IconWrapper className={className}><circle cx="18" cy="18" r="3"/><circle cx="6" cy="6" r="3"/><path d="M6 21V9a9 9 0 0 0 9 9"/></IconWrapper>;
        const UserIcon = ({ className }) => <IconWrapper className={className}><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></IconWrapper>;
        const FileText = ({ className }) => <IconWrapper className={className}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/></IconWrapper>;

        // --- LOGIC UTILS ---
        const generateStableId = (record) => {
            const titleSlug = (record.title || '').toLowerCase().replace(/[^a-z0-9]/g, '').slice(0, 50);
            const year = record.year || '0000';
            const authorSlug = ((record.authors && record.authors[0]) || '').toLowerCase().replace(/[^a-z0-9]/g, '').slice(0, 20);
            const id = `${titleSlug}-${year}-${authorSlug}`;
            return id.length > 5 ? id : crypto.randomUUID();
        };

        const parseRIS = (content) => {
            const lines = content.split('\n');
            const records = [];
            let currentRecord = { keywords: [] };
            let currentTag = null;

            lines.forEach((line) => {
                line = line.trim();
                if (!line) return;

                const tagMatch = line.match(/^([A-Z0-9]{2})\s{2}-\s?(.*)/);

                if (tagMatch) {
                    const tag = tagMatch[1];
                    const value = tagMatch[2];

                    if (tag === 'ER') {
                        if (Object.keys(currentRecord).length > 0) {
                            records.push({ 
                                ...currentRecord, 
                                id: generateStableId(currentRecord),
                                index: records.length + 1, // Stable Index Numbering
                                title: currentRecord.title || 'Untitled',
                                authors: currentRecord.authors || [],
                                year: currentRecord.year || 'N/A'
                            });
                            currentRecord = { keywords: [] };
                        }
                    } else {
                        switch(tag) {
                            case 'TI': case 'T1': currentRecord.title = value; break;
                            case 'AB': case 'N2': currentRecord.abstract = value; break;
                            case 'AU': case 'A1': 
                                if (!currentRecord.authors) currentRecord.authors = [];
                                currentRecord.authors.push(value);
                                break;
                            case 'PY': case 'Y1': currentRecord.year = value; break;
                            case 'JO': case 'T2': case 'JF': currentRecord.journal = value; break;
                            case 'DO': currentRecord.doi = value; break;
                            case 'UR': case 'L1': currentRecord.url = value; break;
                            case 'KW': currentRecord.keywords.push(value); break;
                            case 'LA': currentRecord.language = value; break;
                            case 'TY': currentRecord.pubType = value; break; 
                            default: break;
                        }
                    }
                    currentTag = tag;
                } else {
                    if (currentTag === 'AB' || currentTag === 'N2') {
                        if(currentRecord.abstract) currentRecord.abstract += " " + line;
                    } else if (currentTag === 'TI' || currentTag === 'T1') {
                        if(currentRecord.title) currentRecord.title += " " + line;
                    }
                }
            });
            return records;
        };

        // Dummy Data
        const dummyRIS = `TY  - JOUR
TI  - Artificial Intelligence in Systematic Literature Reviews: A Review
AB  - This paper explores the impact of AI on conducting SLRs. We found that tools like Rayyan significantly reduce workload.
AU  - Smith, J.
AU  - Doe, A.
PY  - 2023
KW  - AI
KW  - Systematic Review
DO  - 10.1000/xyz123
UR  - http://example.com/ai-slr
LA  - English
ER  - 

TY  - CONF
TI  - Machine Learning Algorithms for Text Classification
AB  - An overview of SVM, Naive Bayes, and Neural Networks for text categorization tasks in medical datasets.
AU  - Johnson, B.
PY  - 2022
JO  - IEEE Conference on Data
KW  - Machine Learning
KW  - NLP
LA  - English
ER  - 

TY  - JOUR
TI  - The Effects of Coffee on coding productivity
AB  - A randomized control trial showing significant increase in lines of code produced, but variable quality.
AU  - Programmer, X.
PY  - 2024
JO  - Journal of Caffeine Studies
LA  - English
ER  - `;

        // --- COMPONENTS ---

        const Header = ({ activeTab, setActiveTab, onLoad, onSave, onMerge }) => (
            <header className="bg-[#0f172a]/90 backdrop-blur-md border-b border-white/10 h-16 flex items-center justify-between px-6 shrink-0 z-30 fixed top-0 w-full">
                <div className="flex items-center gap-6">
                    <div className="flex items-center gap-2 text-white cursor-pointer group">
                        <span className="font-bold text-xl tracking-wider">
                            Q<span className="text-blue-500">.</span>SLR
                        </span>
                    </div>
                    
                    <nav className="hidden md:flex gap-1">
                        {['overview', 'review', 'screening'].map((tab) => (
                            <button
                                key={tab}
                                onClick={() => setActiveTab(tab)}
                                className={`px-4 py-2 text-xs font-semibold uppercase tracking-wider rounded-md transition-all ${
                                    activeTab === tab 
                                        ? 'text-blue-400 bg-white/10' 
                                        : 'text-slate-400 hover:text-white hover:bg-white/5'
                                }`}
                            >
                                {tab}
                            </button>
                        ))}
                    </nav>
                </div>

                <div className="flex items-center gap-3">
                    <button 
                        onClick={onLoad}
                        className="flex items-center gap-2 px-3 py-1.5 text-xs font-medium text-slate-300 hover:text-white hover:bg-white/10 rounded border border-white/10 transition-colors"
                        title="Load Project JSON"
                    >
                        <FolderOpen className="w-3.5 h-3.5" /> <span className="hidden sm:inline">Load</span>
                    </button>

                    <button 
                        onClick={onMerge}
                        className="flex items-center gap-2 px-3 py-1.5 text-xs font-medium text-slate-300 hover:text-white hover:bg-white/10 rounded border border-white/10 transition-colors"
                        title="Merge another JSON"
                    >
                        <GitMerge className="w-3.5 h-3.5" /> <span className="hidden sm:inline">Merge</span>
                    </button>

                    <button 
                        onClick={onSave}
                        className="flex items-center gap-2 px-4 py-1.5 text-xs font-medium text-white bg-blue-600 hover:bg-blue-500 rounded-full shadow-lg shadow-blue-500/20 transition-all"
                    >
                        <Save className="w-3.5 h-3.5" /> Save
                    </button>
                </div>
            </header>
        );

        const FilterSidebar = ({ filterKeywords, newKeyword, setNewKeyword, onAddKeyword, onToggleKeyword, onRemoveKeyword, children }) => (
            <div className="w-80 bg-[#020617] border-l border-white/10 flex flex-col shrink-0 z-20">
                <div className="px-6 py-5 border-b border-white/10">
                    <h3 className="text-xs font-bold text-white uppercase tracking-widest flex items-center gap-2">
                        <Filter className="w-3 h-3 text-blue-500" /> Filters
                    </h3>
                </div>
                
                <div className="p-6 flex-1 overflow-y-auto custom-scrollbar">
                    <div className="mb-6">
                        <label className="text-[10px] font-bold text-slate-500 uppercase mb-2 block">Add Keyword</label>
                        <div className="flex shadow-sm rounded-md bg-white/5 border border-white/10 focus-within:border-blue-500/50 transition-colors">
                            <input 
                                type="text" 
                                value={newKeyword}
                                onChange={(e) => setNewKeyword(e.target.value)}
                                onKeyDown={(e) => e.key === 'Enter' && onAddKeyword()}
                                placeholder="Type & Enter..."
                                className="flex-1 min-w-0 block w-full px-3 py-2 bg-transparent text-xs text-slate-200 placeholder-slate-600 focus:outline-none"
                            />
                            <button 
                                onClick={onAddKeyword}
                                className="inline-flex items-center px-3 border-l border-white/10 text-slate-400 hover:text-white hover:bg-white/5"
                            >
                                <Plus className="w-3 h-3" />
                            </button>
                        </div>
                    </div>

                    <div className="space-y-2">
                        {filterKeywords.length === 0 && (
                            <div className="text-center py-8 text-xs text-slate-600 border border-dashed border-white/10 rounded-lg">
                                No filters active.
                            </div>
                        )}
                        {filterKeywords.map((k, idx) => (
                            <div key={idx} className="flex items-center justify-between group px-3 py-2 rounded-lg bg-white/5 border border-transparent hover:border-white/10 hover:bg-white/10 transition-all">
                                <label className="flex items-center gap-3 cursor-pointer flex-1 min-w-0">
                                    <input 
                                        type="checkbox" 
                                        checked={k.active} 
                                        onChange={() => onToggleKeyword(idx)}
                                        className="w-3.5 h-3.5 text-blue-500 rounded border-slate-600 bg-slate-800 focus:ring-0 cursor-pointer"
                                    />
                                    <span className={`text-xs truncate ${k.active ? 'font-medium text-blue-400' : 'text-slate-400'}`}>
                                        {k.text}
                                    </span>
                                </label>
                                <button onClick={() => onRemoveKeyword(idx)} className="text-slate-600 hover:text-red-400 opacity-0 group-hover:opacity-100 px-1 transition-all">
                                    <X className="w-3 h-3" />
                                </button>
                            </div>
                        ))}
                    </div>
                </div>
                {/* Footer / Children (Notes) */}
                {children}
            </div>
        );

        const OverviewView = ({ articles, stats, projectTitle, setProjectTitle, researcherName, setResearcherName }) => {
            const total = articles.length || 1;
            const pInc = (stats.include / total) * 100;
            const pExc = (stats.exclude / total) * 100;
            const pMay = (stats.maybe / total) * 100;
            const pUnd = (stats.undecided / total) * 100;

            const chartStyle = {
                background: `conic-gradient(
                    #22c55e 0% ${pInc}%, 
                    #ef4444 ${pInc}% ${pInc + pExc}%, 
                    #f59e0b ${pInc + pExc}% ${pInc + pExc + pMay}%, 
                    #1e293b ${pInc + pExc + pMay}% 100%
                )`
            };

            return (
                <div className="flex-1 overflow-y-auto p-6 md:p-8 pt-24 animate-fade-in custom-scrollbar">
                    <div className="max-w-6xl mx-auto">
                        <div className="mb-8 flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                            <div>
                                <span className="text-blue-500 font-semibold tracking-wider text-xs uppercase">Dashboard</span>
                                <h1 className="text-3xl font-bold text-white mt-1">Project Overview</h1>
                            </div>
                        </div>

                        {/* Project Metadata Inputs */}
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                            <div className="bg-white/5 p-5 rounded-xl border border-white/10 shadow-sm">
                                <div className="flex items-center gap-2 mb-3">
                                    <FileText className="w-4 h-4 text-blue-400" />
                                    <label className="text-xs font-bold text-slate-300 uppercase tracking-wider">Judul Penelitian</label>
                                </div>
                                <input 
                                    type="text" 
                                    value={projectTitle} 
                                    onChange={(e) => setProjectTitle(e.target.value)} 
                                    placeholder="Contoh: Systematic Review AI di Kesehatan"
                                    className="w-full bg-[#0f172a] text-slate-200 p-3 rounded-lg border border-white/10 focus:border-blue-500 outline-none text-sm placeholder-slate-600 transition-colors"
                                />
                            </div>
                            <div className="bg-white/5 p-5 rounded-xl border border-white/10 shadow-sm">
                                <div className="flex items-center gap-2 mb-3">
                                    <UserIcon className="w-4 h-4 text-blue-400" />
                                    <label className="text-xs font-bold text-slate-300 uppercase tracking-wider">Nama Peneliti</label>
                                </div>
                                <input 
                                    type="text" 
                                    value={researcherName} 
                                    onChange={(e) => setResearcherName(e.target.value)} 
                                    placeholder="Nama Anda"
                                    className="w-full bg-[#0f172a] text-slate-200 p-3 rounded-lg border border-white/10 focus:border-blue-500 outline-none text-sm placeholder-slate-600 transition-colors"
                                />
                            </div>
                        </div>
                        
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div className="col-span-1 md:col-span-2 grid grid-cols-2 gap-4">
                                <div className="bg-white/5 backdrop-blur-sm p-6 rounded-xl border border-white/10">
                                    <div className="text-xs font-semibold text-slate-400 uppercase tracking-wider">Total Articles</div>
                                    <div className="text-4xl font-bold text-white mt-2">{articles.length}</div>
                                </div>
                                <div className="bg-white/5 backdrop-blur-sm p-6 rounded-xl border border-white/10">
                                    <div className="text-xs font-semibold text-slate-400 uppercase tracking-wider">Remaining</div>
                                    <div className="text-4xl font-bold text-slate-500 mt-2">{stats.undecided}</div>
                                </div>
                                
                                <div className="bg-green-500/10 backdrop-blur-sm p-6 rounded-xl border border-green-500/20">
                                    <div className="flex justify-between items-end">
                                        <div>
                                            <div className="text-xs font-semibold text-green-400 uppercase tracking-wider">Included</div>
                                            <div className="text-3xl font-bold text-green-500 mt-1">{stats.include}</div>
                                        </div>
                                        <CheckCircle className="w-8 h-8 text-green-500/20" />
                                    </div>
                                </div>
                                <div className="bg-red-500/10 backdrop-blur-sm p-6 rounded-xl border border-red-500/20">
                                    <div className="flex justify-between items-end">
                                        <div>
                                            <div className="text-xs font-semibold text-red-400 uppercase tracking-wider">Excluded</div>
                                            <div className="text-3xl font-bold text-red-500 mt-1">{stats.exclude}</div>
                                        </div>
                                        <XCircle className="w-8 h-8 text-red-500/20" />
                                    </div>
                                </div>
                            </div>

                            <div className="bg-white/5 backdrop-blur-sm p-8 rounded-xl border border-white/10 flex flex-col items-center justify-center">
                                <div className="relative w-48 h-48 rounded-full mb-6 shadow-2xl" style={chartStyle}>
                                    <div className="absolute inset-3 bg-[#0f172a] rounded-full flex items-center justify-center flex-col">
                                        <span className="text-3xl font-bold text-white">{Math.round(100 - pUnd)}%</span>
                                        <span className="text-[10px] text-slate-400 uppercase tracking-widest mt-1">Progress</span>
                                    </div>
                                </div>
                                <div className="w-full space-y-3 px-4">
                                    <div className="flex items-center justify-between text-xs border-b border-white/5 pb-2">
                                        <span className="flex items-center gap-2 text-slate-300"><div className="w-2 h-2 bg-green-500 rounded-full shadow-[0_0_8px_rgba(34,197,94,0.5)]"></div> Included</span>
                                        <span className="font-mono text-slate-400">{stats.include}</span>
                                    </div>
                                    <div className="flex items-center justify-between text-xs border-b border-white/5 pb-2">
                                        <span className="flex items-center gap-2 text-slate-300"><div className="w-2 h-2 bg-red-500 rounded-full shadow-[0_0_8px_rgba(239,68,68,0.5)]"></div> Excluded</span>
                                        <span className="font-mono text-slate-400">{stats.exclude}</span>
                                    </div>
                                    <div className="flex items-center justify-between text-xs">
                                        <span className="flex items-center gap-2 text-slate-300"><div className="w-2 h-2 bg-amber-500 rounded-full shadow-[0_0_8px_rgba(245,158,11,0.5)]"></div> Maybe</span>
                                        <span className="font-mono text-slate-400">{stats.maybe}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const ReviewView = ({ filteredArticles, totalArticles, decisions, reasons, filterKeywords, newKeyword, setNewKeyword, onAddKeyword, onToggleKeyword, onRemoveKeyword }) => {
            return (
                <div className="flex flex-1 h-full overflow-hidden bg-[#0f172a] pt-16">
                    <div className="flex-1 flex flex-col min-w-0">
                        <div className="px-6 py-4 border-b border-white/10 bg-[#0f172a]/95 backdrop-blur flex justify-between items-center">
                            <div>
                                <span className="text-blue-500 font-semibold tracking-wider text-xs uppercase">Review</span>
                                <h3 className="text-sm font-bold text-white mt-0.5">All References</h3>
                            </div>
                            <div className="text-xs text-slate-400 bg-white/5 px-3 py-1 rounded-full border border-white/5">
                                <span className="text-white font-semibold">{filteredArticles.length}</span> / {totalArticles} entries
                            </div>
                        </div>
                        
                        <div className="flex-1 overflow-y-auto p-4 md:p-6 custom-scrollbar">
                            <div className="bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 overflow-hidden shadow-xl">
                                <table className="w-full text-left text-sm table-fixed">
                                    <thead className="bg-[#020617] border-b border-white/10 text-slate-400 font-semibold text-xs uppercase tracking-wider">
                                        <tr>
                                            <th className="p-4 w-16 text-center">#</th>
                                            <th className="p-4 w-28 text-center">Decision</th>
                                            <th className="p-4 w-32">Reason</th>
                                            <th className="p-4 w-auto">Title / Abstract Snippet</th>
                                            <th className="p-4 w-24 text-right">Year</th>
                                            <th className="p-4 w-40 hidden md:table-cell">Journal</th>
                                        </tr>
                                    </thead>
                                    <tbody className="divide-y divide-white/5">
                                        {filteredArticles.length > 0 ? filteredArticles.map((art) => (
                                            <tr key={art.id} className="hover:bg-white/5 transition-colors group">
                                                <td className="p-4 text-center text-slate-500 text-xs font-mono group-hover:text-blue-400 transition-colors">{art.index}</td>
                                                <td className="p-4 text-center">
                                                    {decisions[art.id] === 'include' && <span className="inline-flex px-2 py-1 rounded text-[10px] font-bold bg-green-500/20 text-green-400 border border-green-500/20 tracking-wider uppercase">Inc</span>}
                                                    {decisions[art.id] === 'exclude' && <span className="inline-flex px-2 py-1 rounded text-[10px] font-bold bg-red-500/20 text-red-400 border border-red-500/20 tracking-wider uppercase">Exc</span>}
                                                    {decisions[art.id] === 'maybe' && <span className="inline-flex px-2 py-1 rounded text-[10px] font-bold bg-amber-500/20 text-amber-400 border border-amber-500/20 tracking-wider uppercase">May</span>}
                                                    {!decisions[art.id] && <span className="text-slate-600">-</span>}
                                                </td>
                                                <td className="p-4 text-xs text-slate-400 truncate italic" title={reasons[art.id]}>
                                                    {reasons[art.id] || <span className="text-slate-600 opacity-30">No notes</span>}
                                                </td>
                                                <td className="p-4">
                                                    <div className="font-medium text-slate-200 line-clamp-1 group-hover:text-blue-400 transition-colors">{art.title}</div>
                                                    <div className="text-xs text-slate-500 mt-1 line-clamp-1">{art.authors ? art.authors[0] : 'No author'} et al.</div>
                                                </td>
                                                <td className="p-4 text-right text-slate-400 font-mono text-xs">{art.year}</td>
                                                <td className="p-4 text-slate-500 text-xs truncate hidden md:table-cell">{art.journal || '-'}</td>
                                            </tr>
                                        )) : (
                                            <tr>
                                                <td colSpan="6" className="p-12 text-center text-slate-500 italic text-sm">No matches found.</td>
                                            </tr>
                                        )}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <FilterSidebar 
                        filterKeywords={filterKeywords}
                        newKeyword={newKeyword}
                        setNewKeyword={setNewKeyword}
                        onAddKeyword={onAddKeyword}
                        onToggleKeyword={onToggleKeyword}
                        onRemoveKeyword={onRemoveKeyword}
                    />
                </div>
            );
        };

        const ScreeningView = ({ articles, currentIndex, setCurrentIndex, decisions, reasons, onDecision, onReasonChange, filterProps, statusFilter, setStatusFilter }) => {
            const currentArticle = articles[currentIndex];
            const noteInputRef = useRef(null);

            const focusNote = () => {
                if (noteInputRef.current) noteInputRef.current.focus();
            };

            return (
                <div className="flex flex-1 h-full overflow-hidden bg-[#0f172a] pt-16">
                    {/* Left: Compact List */}
                    <div className="w-80 bg-[#020617] border-r border-white/10 flex flex-col shrink-0 hidden lg:flex">
                        <div className="px-5 py-3 border-b border-white/10 flex flex-col gap-2">
                            <div className="flex justify-between items-center">
                                <span className="text-xs font-bold text-slate-400 uppercase tracking-widest">List</span>
                                <span className="text-[10px] bg-white/10 text-slate-400 px-2 py-0.5 rounded-full font-mono">
                                    {currentIndex + 1} / {articles.length}
                                </span>
                            </div>
                            <select 
                                value={statusFilter}
                                onChange={(e) => setStatusFilter(e.target.value)}
                                className="w-full bg-white/5 border border-white/10 text-xs text-slate-300 rounded px-2 py-1 outline-none focus:border-blue-500/50"
                            >
                                <option value="all" className="bg-[#020617]">All Status</option>
                                <option value="include" className="bg-[#020617]">Include</option>
                                <option value="exclude" className="bg-[#020617]">Exclude</option>
                                <option value="maybe" className="bg-[#020617]">Maybe</option>
                                <option value="undecided" className="bg-[#020617]">Undecided</option>
                            </select>
                        </div>
                        <div className="flex-1 overflow-y-auto custom-scrollbar">
                            {articles.length > 0 ? articles.map((art, idx) => (
                                <div 
                                    key={art.id}
                                    onClick={() => setCurrentIndex(idx)}
                                    className={`px-5 py-4 border-b border-white/5 cursor-pointer text-xs group transition-all relative
                                        ${currentIndex === idx ? 'bg-white/5' : 'hover:bg-white/5 opacity-70 hover:opacity-100'}
                                    `}
                                >
                                    {currentIndex === idx && <div className="absolute left-0 top-0 bottom-0 w-0.5 bg-blue-500 shadow-[0_0_10px_rgba(59,130,246,0.5)]"></div>}
                                    
                                    <div className="flex justify-between items-start mb-2">
                                        <span className={`font-mono text-[10px] ${currentIndex === idx ? 'text-blue-400 font-bold' : 'text-slate-500'}`}>#{art.index}</span>
                                        {decisions[art.id] === 'include' && <div className="w-1.5 h-1.5 rounded-full bg-green-500 shadow-[0_0_5px_rgba(34,197,94,0.5)]"></div>}
                                        {decisions[art.id] === 'exclude' && <div className="w-1.5 h-1.5 rounded-full bg-red-500 shadow-[0_0_5px_rgba(239,68,68,0.5)]"></div>}
                                        {decisions[art.id] === 'maybe' && <div className="w-1.5 h-1.5 rounded-full bg-amber-500 shadow-[0_0_5px_rgba(245,158,11,0.5)]"></div>}
                                    </div>
                                    <div className={`line-clamp-2 leading-relaxed ${currentIndex === idx ? 'text-slate-200 font-medium' : 'text-slate-400'}`}>
                                        {art.title}
                                    </div>
                                </div>
                            )) : (
                                <div className="p-5 text-center text-xs text-slate-600 italic">No articles match the current filter.</div>
                            )}
                        </div>
                    </div>

                    {/* Center: Reading Pane (Full Width) */}
                    <div className="flex-1 flex flex-col min-w-0 bg-[#0f172a]">
                        
                        {/* Top Fixed Decision Toolbar */}
                        <div className="sticky top-0 z-10 bg-[#0f172a]/95 backdrop-blur border-b border-white/10 px-6 py-3 flex justify-between items-center shrink-0">
                             <div className="flex items-center gap-4">
                                <div className={`px-3 py-1 rounded text-[10px] font-bold uppercase tracking-wider border transition-all duration-300
                                    ${!decisions[currentArticle?.id] ? 'bg-white/5 text-slate-500 border-white/10' : ''}
                                    ${decisions[currentArticle?.id] === 'include' ? 'bg-green-500/10 text-green-400 border-green-500/30' : ''}
                                    ${decisions[currentArticle?.id] === 'exclude' ? 'bg-red-500/10 text-red-400 border-red-500/30' : ''}
                                    ${decisions[currentArticle?.id] === 'maybe' ? 'bg-amber-500/10 text-amber-400 border-amber-500/30' : ''}
                                `}>
                                    {decisions[currentArticle?.id] || 'Undecided'}
                                </div>
                                
                                <div className="h-4 w-px bg-white/10"></div>

                                <div className="flex gap-2">
                                    <button onClick={() => onDecision('include')} className={`p-2 rounded hover:bg-white/10 transition-colors ${decisions[currentArticle?.id] === 'include' ? 'text-green-400' : 'text-slate-400'}`} title="Include (I)">
                                        <CheckCircle className="w-5 h-5" />
                                    </button>
                                    <button onClick={() => onDecision('exclude')} className={`p-2 rounded hover:bg-white/10 transition-colors ${decisions[currentArticle?.id] === 'exclude' ? 'text-red-400' : 'text-slate-400'}`} title="Exclude (E)">
                                        <XCircle className="w-5 h-5" />
                                    </button>
                                    <button onClick={() => onDecision('maybe')} className={`p-2 rounded hover:bg-white/10 transition-colors ${decisions[currentArticle?.id] === 'maybe' ? 'text-amber-400' : 'text-slate-400'}`} title="Maybe (M)">
                                        <HelpCircle className="w-5 h-5" />
                                    </button>
                                    <button onClick={focusNote} className={`p-2 rounded hover:bg-white/10 transition-colors ${reasons[currentArticle?.id] ? 'text-blue-400' : 'text-slate-400'}`} title="Add Note">
                                        <Edit3 className="w-5 h-5" />
                                    </button>
                                </div>
                             </div>

                             <div className="flex gap-2">
                                <button 
                                    onClick={() => currentIndex > 0 && setCurrentIndex(c => c - 1)}
                                    className="p-1.5 text-slate-400 hover:text-white disabled:opacity-30 transition-colors"
                                    disabled={currentIndex === 0}
                                >
                                    <ArrowLeft className="w-5 h-5"/>
                                </button>
                                <button 
                                    onClick={() => currentIndex < articles.length - 1 && setCurrentIndex(c => c + 1)}
                                    className="p-1.5 text-slate-400 hover:text-white disabled:opacity-30 transition-colors"
                                    disabled={currentIndex === articles.length - 1}
                                >
                                    <ArrowRight className="w-5 h-5"/>
                                </button>
                             </div>
                        </div>

                        <div className="flex-1 overflow-y-auto p-8 custom-scrollbar w-full">
                            {currentArticle ? (
                                <div className="w-full max-w-4xl mx-auto pb-20">
                                    <div className="mb-8">
                                        <div className="flex flex-wrap items-center gap-3 mb-4">
                                            {currentArticle.journal && (
                                                <span className="text-xs font-serif italic text-blue-300 bg-blue-500/10 px-3 py-1 rounded-full border border-blue-500/20">
                                                    {currentArticle.journal}
                                                </span>
                                            )}
                                            <span className="text-xs font-mono text-slate-400 border border-white/10 px-2 py-1 rounded">
                                                {currentArticle.year}
                                            </span>
                                        </div>

                                        <h1 className="text-2xl md:text-3xl font-bold text-white leading-tight mb-4 tracking-tight">
                                            {currentArticle.title}
                                        </h1>

                                        <div className="text-sm text-slate-400 leading-relaxed border-l-2 border-white/10 pl-4">
                                            {currentArticle.authors ? currentArticle.authors.join(', ') : 'Unknown Authors'}
                                        </div>
                                    </div>

                                    <div className="mb-10 bg-white/5 rounded-xl p-8 border border-white/5 shadow-inner">
                                        <h3 className="text-xs font-bold text-slate-500 uppercase tracking-widest mb-4">Abstract</h3>
                                        <p className="text-base md:text-lg text-slate-300 leading-8 text-justify font-light">
                                            {currentArticle.abstract || <span className="text-slate-600 italic">Abstract not available.</span>}
                                        </p>
                                    </div>

                                    {currentArticle.keywords && currentArticle.keywords.length > 0 && (
                                        <div className="mb-10">
                                            <h3 className="text-xs font-bold text-slate-500 uppercase tracking-widest mb-3">Keywords</h3>
                                            <div className="flex flex-wrap gap-2">
                                                {currentArticle.keywords.map((k, i) => (
                                                    <span key={i} className="px-3 py-1.5 bg-[#020617] text-slate-400 border border-white/10 rounded text-xs hover:border-blue-500/30 hover:text-blue-400 transition-colors cursor-default">
                                                        {k}
                                                    </span>
                                                ))}
                                            </div>
                                        </div>
                                    )}
                                    
                                    <div className="flex gap-6 text-xs pt-8 border-t border-white/10 mb-10">
                                        {currentArticle.doi && (
                                            <div className="flex flex-col gap-1">
                                                <span className="font-bold text-slate-500 uppercase tracking-wider">DOI</span>
                                                <span className="font-mono text-slate-400 select-all">{currentArticle.doi}</span>
                                            </div>
                                        )}
                                        {currentArticle.url && (
                                            <div className="flex flex-col gap-1">
                                                <span className="font-bold text-slate-500 uppercase tracking-wider">Source</span>
                                                <a href={currentArticle.url} target="_blank" rel="noreferrer" className="text-blue-400 hover:text-blue-300 hover:underline flex items-center gap-1 transition-colors">
                                                    Open External Link <ExternalLink className="w-3 h-3"/>
                                                </a>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            ) : (
                                <div className="h-full flex items-center justify-center text-slate-500 text-sm">Select an article to review</div>
                            )}
                        </div>
                    </div>

                    {/* Right: Filters & Notes */}
                    <FilterSidebar {...filterProps}>
                        <div className="border-t border-white/10 p-5 bg-[#020617]">
                            <div className="flex items-center gap-2 mb-3">
                                <Edit3 className="w-3 h-3 text-slate-500" />
                                <label className="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Reason / Notes</label>
                            </div>
                            <textarea 
                                ref={noteInputRef}
                                value={reasons[currentArticle?.id] || ''}
                                onChange={(e) => onReasonChange(currentArticle?.id, e.target.value)}
                                placeholder="Why this decision?..."
                                className="w-full p-3 text-xs bg-white/5 border border-white/10 rounded-lg focus:border-blue-500/50 text-slate-300 focus:outline-none min-h-[120px] resize-none placeholder-slate-600"
                            />
                        </div>
                    </FilterSidebar>
                </div>
            );
        };

        const App = () => {
            const [articles, setArticles] = useState([]);
            const [decisions, setDecisions] = useState({}); 
            const [reasons, setReasons] = useState({}); 
            const [currentIndex, setCurrentIndex] = useState(0);
            const [activeTab, setActiveTab] = useState('upload'); 
            const [dragActive, setDragActive] = useState(false);
            const [filterKeywords, setFilterKeywords] = useState([]); 
            const [newKeyword, setNewKeyword] = useState('');
            const [projectTitle, setProjectTitle] = useState('');
            const [researcherName, setResearcherName] = useState('');
            const [statusFilter, setStatusFilter] = useState('all');

            const fileInputRef = useRef(null);
            const loadInputRef = useRef(null);
            const mergeInputRef = useRef(null);

            const processFile = (file) => {
                const reader = new FileReader();
                reader.onload = (event) => {
                    const content = event.target.result;
                    if (file.name.endsWith('.json')) {
                        try {
                            const projectData = JSON.parse(content);
                            if (projectData.articles && projectData.decisions) {
                                setArticles(projectData.articles);
                                setDecisions(projectData.decisions);
                                setReasons(projectData.reasons || {});
                                setFilterKeywords(projectData.filterKeywords || []);
                                // Load Metadata if exists
                                if (projectData.metadata) {
                                    setProjectTitle(projectData.metadata.title || '');
                                    setResearcherName(projectData.metadata.researcher || '');
                                }
                                setActiveTab('overview');
                                setCurrentIndex(0);
                            } else { alert('Invalid JSON.'); }
                        } catch (e) { alert('Error reading file.'); }
                    } else {
                        setArticles(parseRIS(content));
                        setDecisions({}); setReasons({}); setFilterKeywords([]);
                        setProjectTitle(''); setResearcherName(''); // Reset metadata on new RIS
                        setActiveTab('overview'); setCurrentIndex(0);
                    }
                };
                reader.readAsText(file);
            };

            const handleMergeUpload = (e) => {
                const file = e.target.files[0];
                if (!file) return;
                const reader = new FileReader();
                reader.onload = (event) => {
                    try {
                        const importedData = JSON.parse(event.target.result);
                        if (!importedData.decisions) { alert('Invalid JSON.'); return; }
                        let mergedCount = 0, conflictCount = 0, ignoredCount = 0;
                        const newDecisions = { ...decisions };
                        const newReasons = { ...reasons };
                        Object.keys(importedData.decisions).forEach(id => {
                            if (!articles.find(a => a.id === id)) return;
                            const localDesc = decisions[id];
                            const importedDesc = importedData.decisions[id];
                            if (!localDesc) {
                                newDecisions[id] = importedDesc;
                                if (importedData.reasons?.[id]) newReasons[id] = importedData.reasons[id];
                                mergedCount++;
                            } else if (localDesc !== importedDesc) { conflictCount++; } else { ignoredCount++; }
                        });
                        setDecisions(newDecisions); setReasons(newReasons);
                        alert(`Merge Report:\n Merged: ${mergedCount}\n Conflicts: ${conflictCount}\n Ignored: ${ignoredCount}`);
                    } catch (err) { alert('Merge failed.'); }
                };
                reader.readAsText(file);
                e.target.value = null; 
            };

            const handleFileUpload = (e) => { if (e.target.files[0]) processFile(e.target.files[0]); };
            
            const loadDummyData = () => {
                setArticles(parseRIS(dummyRIS)); setDecisions({}); setReasons({});
                setFilterKeywords([{ text: 'AI', active: false }, { text: 'Machine Learning', active: false }]);
                setProjectTitle('Demo Project'); setResearcherName('Guest Researcher');
                setActiveTab('overview'); setCurrentIndex(0);
            };

            const handleSaveProject = () => {
                const timestamp = new Date().toISOString().replace(/[-:T.]/g, '').slice(0, 14); // YYYYMMDDHHMMSS
                const safeTitle = projectTitle.trim().replace(/[\s_]/g, '') || 'Untitled';
                const safeResearcher = researcherName.trim().replace(/[\s_]/g, '') || 'Researcher';
                const filename = `${timestamp}_${safeResearcher}_${safeTitle}.json`;

                const projectData = {
                    version: 1,
                    metadata: {
                        title: projectTitle,
                        researcher: researcherName,
                        timestamp: new Date().toISOString()
                    },
                    articles,
                    decisions,
                    reasons,
                    filterKeywords
                };

                const blob = new Blob([JSON.stringify(projectData, null, 2)], { type: "application/json" });
                const link = document.createElement('a'); 
                link.href = URL.createObjectURL(blob);
                link.download = filename; 
                document.body.appendChild(link); 
                link.click(); 
                document.body.removeChild(link);
            };

            const handleDecision = useCallback((decision) => {
                if (articles.length === 0) return;
                // Use filtered list to find current article ID, because index is based on that list
                const currentArticleId = filteredArticles[currentIndex]?.id;
                if (!currentArticleId) return;

                setDecisions(prev => ({ ...prev, [currentArticleId]: decision }));
                // Auto-advance removed per user request to allow note entry
                // if (currentIndex < filteredArticles.length - 1 && activeTab === 'screening') setCurrentIndex(prev => prev + 1);
            }, [articles, currentIndex, activeTab, filterKeywords]); // filterKeywords dependency for filteredArticles calc
            
            const handleReasonChange = (id, text) => setReasons(prev => ({ ...prev, [id]: text }));
            
            // Re-calculate filtered articles
            const filteredArticles = activeTab === 'review' || activeTab === 'screening' ? articles.filter(art => {
                // Keyword Filter
                const matchesKeyword = filterKeywords.length === 0 || filterKeywords.filter(k => k.active).some(k => `${art.title} ${art.abstract} ${art.keywords?.join(' ')}`.toLowerCase().includes(k.text.toLowerCase()));
                
                if (!matchesKeyword) return false;

                // Status Filter (Only applicable in screening tab for the list, but let's apply globally for consistency or logic)
                // The prompt asked for "filter di list screening".
                if (activeTab === 'screening' && statusFilter !== 'all') {
                    const status = decisions[art.id] || 'undecided';
                    return status === statusFilter;
                }
                
                return true;
            }) : articles;

            // Reset current index when filter changes to avoid out of bounds
            useEffect(() => {
                setCurrentIndex(0);
            }, [statusFilter, filterKeywords]);

            useEffect(() => {
                const handleKeyDown = (e) => {
                    if (activeTab !== 'screening' || ['INPUT', 'TEXTAREA'].includes(document.activeElement.tagName)) return;
                    switch(e.key.toLowerCase()) {
                        case 'i': handleDecision('include'); break;
                        case 'e': handleDecision('exclude'); break;
                        case 'm': handleDecision('maybe'); break;
                        case 'arrowright': if(currentIndex < filteredArticles.length - 1) setCurrentIndex(c => c + 1); break;
                        case 'arrowleft': if(currentIndex > 0) setCurrentIndex(c => c - 1); break;
                        default: break;
                    }
                };
                window.addEventListener('keydown', handleKeyDown); return () => window.removeEventListener('keydown', handleKeyDown);
            }, [activeTab, currentIndex, filteredArticles.length, handleDecision]);

            const addKeyword = () => { 
                if (newKeyword.trim() && !filterKeywords.find(k => k.text.toLowerCase() === newKeyword.toLowerCase())) 
                    setFilterKeywords([...filterKeywords, { text: newKeyword.trim(), active: true }]); 
                setNewKeyword(''); 
            };
            const toggleKeyword = (i) => { const n = [...filterKeywords]; n[i].active = !n[i].active; setFilterKeywords(n); };
            const removeKeyword = (i) => setFilterKeywords(filterKeywords.filter((_, idx) => idx !== i));
            
            const stats = { include: 0, exclude: 0, maybe: 0, undecided: 0 };
            articles.forEach(a => stats[decisions[a.id] || 'undecided']++);

            const filterProps = {
                filterKeywords, newKeyword, setNewKeyword, onAddKeyword: addKeyword, onToggleKeyword: toggleKeyword, onRemoveKeyword: removeKeyword
            };

            if (activeTab === 'upload') {
                return (
                    <div className="h-screen w-full flex flex-col bg-[#0f172a] text-slate-200 font-sans selection:bg-blue-500 selection:text-white">
                        <div className="absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none">
                            <div className="absolute top-[-10%] right-[-10%] w-[500px] h-[500px] bg-blue-600/10 rounded-full blur-[100px]"></div>
                            <div className="absolute bottom-[-10%] left-[-10%] w-[600px] h-[600px] bg-indigo-600/10 rounded-full blur-[120px]"></div>
                        </div>

                        <div className="flex-1 flex flex-col items-center justify-center p-6 relative z-10">
                            <div className="max-w-lg w-full bg-white/5 backdrop-blur-xl rounded-2xl border border-white/10 p-10 shadow-2xl animate-fade-in-up">
                                <div className="flex items-center justify-center gap-3 mb-8">
                                    <span className="font-bold text-3xl tracking-wider text-white">
                                        Q<span className="text-blue-500">.</span>SLR
                                    </span>
                                </div>
                                
                                <div className="space-y-6">
                                    <label 
                                        className={`flex flex-col items-center justify-center w-full h-48 border-2 border-dashed rounded-xl cursor-pointer transition-all duration-300 group
                                            ${dragActive ? 'border-blue-500 bg-blue-500/10' : 'border-white/10 bg-white/5 hover:bg-white/10 hover:border-white/20'}`}
                                        onDragOver={(e) => { e.preventDefault(); setDragActive(true); }}
                                        onDragLeave={() => setDragActive(false)}
                                        onDrop={(e) => { e.preventDefault(); setDragActive(false); if (e.dataTransfer.files[0]) processFile(e.dataTransfer.files[0]); }}
                                    >
                                        <div className="flex flex-col items-center justify-center pt-5 pb-6 text-center">
                                            <div className="p-4 rounded-full bg-white/5 mb-3 group-hover:scale-110 transition-transform">
                                                <Upload className="w-8 h-8 text-blue-400" />
                                            </div>
                                            <p className="text-sm font-medium text-slate-200">Drag & Drop RIS file here</p>
                                            <p className="text-xs text-slate-500 mt-1">or click to browse</p>
                                        </div>
                                        <input type="file" ref={fileInputRef} className="hidden" onChange={handleFileUpload} />
                                    </label>
                                    
                                    <div className="grid grid-cols-2 gap-4">
                                        <button 
                                            onClick={() => fileInputRef.current.click()}
                                            className="py-3 px-4 bg-blue-600 hover:bg-blue-500 text-white rounded-lg text-sm font-medium transition-all shadow-lg shadow-blue-600/20"
                                        >
                                            Select File
                                        </button>
                                        <button 
                                            onClick={loadDummyData}
                                            className="py-3 px-4 bg-white/5 hover:bg-white/10 text-slate-300 border border-white/10 rounded-lg text-sm font-medium transition-all"
                                        >
                                            Try Demo
                                        </button>
                                    </div>
                                    
                                    <div className="text-center pt-4 border-t border-white/5">
                                        <button onClick={() => loadInputRef.current.click()} className="text-xs text-slate-500 hover:text-blue-400 transition-colors flex items-center justify-center gap-1 mx-auto">
                                            <FolderOpen className="w-3 h-3"/> Load existing project (.json)
                                        </button>
                                        <input type="file" ref={loadInputRef} className="hidden" accept=".json" onChange={handleFileUpload} />
                                    </div>
                                </div>
                            </div>
                            
                            <div className="mt-8 text-[10px] text-slate-600 text-center uppercase tracking-widest">
                                Serverless Systematic Literature Review Tool
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="h-screen w-full flex flex-col bg-[#0f172a] font-sans text-slate-200 overflow-hidden selection:bg-blue-500 selection:text-white">
                    <Header 
                        activeTab={activeTab} 
                        setActiveTab={setActiveTab} 
                        onLoad={() => loadInputRef.current.click()}
                        onSave={handleSaveProject}
                        onMerge={() => mergeInputRef.current.click()}
                    />
                    <input type="file" ref={loadInputRef} className="hidden" accept=".json" onChange={handleFileUpload} />
                    <input type="file" ref={mergeInputRef} className="hidden" accept=".json" onChange={handleMergeUpload} />

                    <main className="flex-1 flex flex-col min-h-0 overflow-hidden relative">
                        <div className="absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none z-0 opacity-30">
                            <div className="absolute top-[-10%] right-[-10%] w-[600px] h-[600px] bg-blue-600/10 rounded-full blur-[120px]"></div>
                        </div>
                        
                        <div className="relative z-10 flex-1 h-full overflow-hidden">
                            {activeTab === 'overview' && <OverviewView 
                                articles={articles} 
                                stats={stats} 
                                projectTitle={projectTitle}
                                setProjectTitle={setProjectTitle}
                                researcherName={researcherName}
                                setResearcherName={setResearcherName}
                            />}
                            {activeTab === 'review' && (
                                <ReviewView 
                                    filteredArticles={filteredArticles}
                                    totalArticles={articles.length}
                                    decisions={decisions}
                                    reasons={reasons}
                                    {...filterProps}
                                />
                            )}
                            {activeTab === 'screening' && (
                                <ScreeningView 
                                    articles={filteredArticles} // Pass filtered articles to screening
                                    currentIndex={currentIndex}
                                    setCurrentIndex={setCurrentIndex}
                                    decisions={decisions}
                                    reasons={reasons}
                                    onDecision={handleDecision}
                                    onReasonChange={handleReasonChange}
                                    filterProps={filterProps} // Pass filter props
                                    statusFilter={statusFilter}
                                    setStatusFilter={setStatusFilter}
                                />
                            )}
                        </div>
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
